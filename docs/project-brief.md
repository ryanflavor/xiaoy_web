# 项目简报：期权交易系统Web端界面现代化

## 1. 执行摘要 (Executive Summary)

本项目旨在为现有功能强大的桌面期权交易系统开发一个全新的、基于Web的前端用户界面。核心目标是解决原桌面应用在可访问性和更新部署方面的局限性。新的Web界面将完整地复刻并优化现有系统的核心价值：一个独特的、基于自定义指令的快速订单生成系统，并结合了实时多账户监控和算法交易跟踪功能，最终为交易员提供一个更灵活、高效、且易于访问的交易平台。

## 2. 问题陈述 (Problem Statement)

当前，交易员依赖一个功能丰富但灵活性不足的桌面应用程序进行日常交易。这种模式带来了几个核心痛点：
* **访问受限**：交易员的活动被绑定在安装了特定客户端的物理机器上，无法实现远程或跨设备操作。
* **部署和维护成本高**：任何软件更新都需要在每台客户端机器上单独安装，增加了IT维护的复杂性和时间成本。
* **技术栈限制**：桌面应用的技术栈限制了利用现代Web技术（如实时数据流、动态UI、浏览器通知）来进一步提升用户体验和交互效率的可能性。

## 3. 解决方案 (Proposed Solution)

我们将采用“棕地 (Brownfield)”开发模式，创建一个全新的Web前端，该前端将通过API与现有的、保持不变的后端系统进行通信。

* **核心理念**: 完整保留并优化现有工作流的效率，特别是自定义指令解析功能。
* **关键差异化**: 新系统将提供一个响应式的、信息密集的交易仪表盘，交易员只需通过现代浏览器即可随时随地访问。
* **技术实现**:
    * 前端将精确复刻Python脚本中定义的指令解析逻辑，提供实时语法反馈。
    * 通过WebSockets实现与后端的实时双向通信，用于接收账户状态、算法进度和错误信息。
    * 通过安全的API网关暴露现有后端RPC服务，供Web前端调用。

## 4. 目标用户 (Target Users)

* **主要用户**: 专业期权交易员（如“Ryan”）。他们追求极致的速度和效率，习惯于处理高密度的信息界面，并严重依赖自定义指令进行快速交易。
* **次要用户 (潜在)**: 风险管理员或IT支持人员。他们可能使用该系统来监控多个交易员的活动和整体风险暴露。

## 5. 目标与成功指标 (Goals & Success Metrics)

* **业务目标**:
    * 提升交易员的操作灵活性和地理位置无关性。
    * 降低客户端软件的分发和维护开销。
* **用户目标**:
    * 提供一个功能上不亚于、体验上超越桌面版的Web交易界面。
    * 确保核心交易工作流（特别是指令下单）的速度和效率。
* **关键绩效指标 (KPIs)**:
    * **执行效率**: 测量从输入指令到订单确认的平均时间，应小于或等于桌面版。
    * **用户满意度**: 产品上线后，通过问卷调查交易员的满意度评分。
    * **采用率**: 上线3个月内，通过新Web界面完成的交易量占比。
    * **指令错误率**: 由于提供了实时解析反馈，用户的无效指令输入率应有所降低。

## 6. MVP范围 (MVP Scope)

#### **范围内 (In Scope):**
1.  **指令下单模块**:
    * 指令输入框，并能加载最近使用过的指令。
    * 根据用户输入，提供实时的指令拆分和格式化预览。
    * 下单前的综合预览表格，需包含以下列：`合约名称`, `VolM`, `方向`, `时间`, `档位`, `数量`, `价格`, `Margin`, `CashD`, `CashV`。
    * 表格底部需有跨账户的综合风险度百分比统计。
2.  **虚拟账户监控模块**:
    * 展示所有虚拟账户及其“在线状态”和“仓位校验”结果。
    * 复选框需根据后台推送的账户健康状态，动态变为“可勾选”（如绿色）或“不可勾选”（如灰色）。
    * 所有需要账户参与的操作，都必须校验此处的勾选状态。
3.  **算法监控模块**:
    * 按 `portfolio_id` 对算法单进行分组展示。
    * 显示每个分组的总体进度和盈亏，以及内部各账户的独立进度。
    * 提供“暂停”、“继续”、“停止”的交互按钮。
    * 当算法100%完成后，操作按钮变为“结束”的最终状态。
4.  **通知系统**:
    * 实现浏览器桌面通知和声音提醒，用于提示关键事件（如订单成交、算法错误）。

#### **范围外 (Out of Scope):**
* “持仓统计”相关功能。
* 高级历史数据回测、分析或图表功能。
* 用户自定义的界面布局或主题。
* 为管理员或风控角色设计的特定视图和功能。

## 7. 后续版本愿景 (Post-MVP Vision)

* 引入高级数据可视化图表和分析工具。
* 开发管理员和风控角色的专用仪表盘。
* 允许交易员保存、命名和管理常用的指令模板。
* 为移动设备进行特别优化，提供移动端交易体验。

## 8. 技术考量 (Technical Considerations)

* 这是一个纯前端开发项目，后端系统和接口保持不变。
* 前端需要使用JavaScript/TypeScript完美复刻所有指令解析逻辑。
* 需要一个API网关层来桥接Web友好的协议（REST/GraphQL/tRPC + WebSocket）和现有的后端RPC服务。

## 9. 限制与假设 (Constraints & Assumptions)

* **限制**: 后端服务和业务逻辑不可更改。
* **限制**: 提供的Python脚本是指令解析逻辑的唯一真实来源，必须被精确复制。
* **假设**: 现有的后端服务可以通过一个新建的、安全的API网关暴露给Web客户端。
* **假设**: 我们可以自由选择一个现代前端框架（如React, Vue, Svelte等）进行开发。

## 10. 风险与开放问题 (Risks & Open Questions)

* **风险**: 在JavaScript/TypeScript中复刻复杂的Python解析逻辑可能存在细微差异，需要进行严格的、覆盖所有测试用例的对比测试。
* **风险**: Web应用的网路延迟可能高于桌面C/S应用，需要通过优化的UI/UX设计（如乐观更新、即时反馈）来确保交易体验的流畅性。
* **开放问题**: 新的Web应用将采用何种身份验证机制（如Token, OAuth2等）来与后端安全地对接？

## 11. 附录 (Appendices)

* `vega_case1.py`, `clear_case1.py`, `delta_case1.py`, `delta_case2.py`, `delta_case3.py`：这些文件定义了指令解析的核心业务规则。

## 12. 后续步骤 (Next Steps)

1.  将此《项目简报》提交给**产品经理(PM)**，以创建更详细的《产品需求文档(brownfield-prd)》。
2.  将此《项目简报》提交给**用户体验专家(UX Expert)**，以开始进行界面线框图和视觉设计。
